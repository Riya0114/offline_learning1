<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Analytics - Rural Learning</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .analytics-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .analytics-card.large {
            grid-column: span 2;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
            position: relative;
        }
        
        .metric-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .metric-value {
            font-size: 36px;
            font-weight: bold;
        }
        
        .metric-change {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .metric-change.positive {
            color: #4CAF50;
        }
        
        .metric-change.negative {
            color: #F44336;
        }
        
        .risk-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }
        
        .risk-low { background: #4CAF50; }
        .risk-medium { background: #FF9800; }
        .risk-high { background: #F44336; }
        
        .student-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .student-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .student-list-item:last-child {
            border-bottom: none;
        }
        
        .progress-indicator {
            width: 100px;
            height: 6px;
            background: var(--light-bg);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--secondary-color);
            border-radius: 3px;
        }
        
        .filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            background: white;
        }
        
        .time-range {
            display: flex;
            gap: 5px;
            background: var(--light-bg);
            padding: 5px;
            border-radius: 5px;
        }
        
        .time-btn {
            padding: 5px 15px;
            border: none;
            background: none;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .time-btn.active {
            background: white;
            box-shadow: var(--shadow);
        }
        
        .insight-card {
            background: #F0F7FF;
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin-top: 15px;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <i class="fas fa-school"></i>
            <h2>Rural Learning</h2>
        </div>
        <ul class="nav-links">
            <li><a href="index.html"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
            <li><a href="students.html"><i class="fas fa-users"></i><span>Students</span></a></li>
            <li><a href="attendance.html"><i class="fas fa-clipboard-check"></i><span>Attendance</span></a></li>
            <li><a href="syllabus.html"><i class="fas fa-book-open"></i><span>Syllabus</span></a></li>
            <li><a href="learning.html"><i class="fas fa-graduation-cap"></i><span>Learning</span></a></li>
            <li class="active"><a href="analytics.html"><i class="fas fa-chart-bar"></i><span>Analytics</span></a></li>
            <li><a href="offline.html"><i class="fas fa-download"></i><span>Offline Content</span></a></li>
        </ul>
    </nav>

    <main class="main-content">
        <header class="top-bar">
            <div class="filter-bar">
                <select class="filter-select" id="filter-grade-analytics">
                    <option value="">All Grades</option>
                    <option value="1">Grade 1</option>
                    <option value="2">Grade 2</option>
                    <option value="3">Grade 3</option>
                    <option value="4">Grade 4</option>
                    <option value="5">Grade 5</option>
                </select>
                <select class="filter-select" id="filter-village-analytics">
                    <option value="">All Villages</option>
                </select>
                <select class="filter-select" id="filter-subject-analytics">
                    <option value="">All Subjects</option>
                    <option value="Mathematics">Mathematics</option>
                    <option value="Science">Science</option>
                    <option value="English">English</option>
                    <option value="Social Studies">Social Studies</option>
                </select>
            </div>
            <button class="btn-primary" onclick="exportAnalytics()">
                <i class="fas fa-download"></i> Export Report
            </button>
        </header>

        <div class="dashboard-container">
            <div class="section-header">
                <h1>Learning Analytics Dashboard</h1>
                <div class="time-range">
                    <button class="time-btn active" onclick="setTimeRange('week')">Week</button>
                    <button class="time-btn" onclick="setTimeRange('month')">Month</button>
                    <button class="time-btn" onclick="setTimeRange('quarter')">Quarter</button>
                    <button class="time-btn" onclick="setTimeRange('year')">Year</button>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="analytics-grid">
                <div class="metric-card">
                    <div>
                        <h3>Overall Attendance</h3>
                        <div class="metric-value" id="overall-attendance">85%</div>
                        <div class="metric-change positive">
                            <i class="fas fa-arrow-up"></i> 2.5% from last week
                        </div>
                    </div>
                    <i class="fas fa-calendar-check fa-3x" style="opacity: 0.2;"></i>
                </div>
                
                <div class="metric-card" style="background: linear-gradient(135deg, #4CAF50, #2E7D32);">
                    <div>
                        <h3>Average Score</h3>
                        <div class="metric-value" id="average-score">78%</div>
                        <div class="metric-change positive">
                            <i class="fas fa-arrow-up"></i> 5% from last month
                        </div>
                    </div>
                    <i class="fas fa-chart-line fa-3x" style="opacity: 0.2;"></i>
                </div>
                
                <div class="metric-card" style="background: linear-gradient(135deg, #FF9800, #EF6C00);">
                    <div>
                        <h3>Study Hours</h3>
                        <div class="metric-value" id="total-study-hours">142</div>
                        <div class="metric-change positive">
                            <i class="fas fa-arrow-up"></i> 12% from last week
                        </div>
                    </div>
                    <i class="fas fa-clock fa-3x" style="opacity: 0.2;"></i>
                </div>
                
                <div class="metric-card" style="background: linear-gradient(135deg, #F44336, #C62828);">
                    <div>
                        <h3>At Risk Students</h3>
                        <div class="metric-value" id="risk-count">3</div>
                        <div class="metric-change negative">
                            <i class="fas fa-arrow-down"></i> 1 from last week
                        </div>
                    </div>
                    <i class="fas fa-exclamation-triangle fa-3x" style="opacity: 0.2;"></i>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="analytics-grid">
                <div class="analytics-card large">
                    <h3><i class="fas fa-chart-line"></i> Attendance Trend</h3>
                    <div class="chart-container">
                        <canvas id="attendance-trend-chart"></canvas>
                    </div>
                </div>
                
                <div class="analytics-card">
                    <h3><i class="fas fa-chart-pie"></i> Subject Performance</h3>
                    <div class="chart-container">
                        <canvas id="subject-performance-chart"></canvas>
                    </div>
                </div>
                
                <div class="analytics-card">
                    <h3><i class="fas fa-chart-bar"></i> Learning Progress</h3>
                    <div class="chart-container">
                        <canvas id="learning-progress-chart"></canvas>
                    </div>
                </div>
                
                <div class="analytics-card large">
                    <h3><i class="fas fa-users"></i> Student Risk Analysis</h3>
                    <div class="student-list" id="risk-students-list">
                        <!-- Risk students will be listed here -->
                        <div class="loading">Loading risk analysis...</div>
                    </div>
                </div>
            </div>

            <!-- Performance Insights -->
            <div class="analytics-card">
                <h3><i class="fas fa-lightbulb"></i> Performance Insights</h3>
                <div id="performance-insights">
                    <div class="insight-card">
                        <h4><i class="fas fa-check-circle" style="color: #4CAF50;"></i> Strong Performance</h4>
                        <p>Mathematics scores improved by 15% this month. Students are responding well to visual learning materials.</p>
                    </div>
                    <div class="insight-card">
                        <h4><i class="fas fa-exclamation-triangle" style="color: #FF9800;"></i> Areas for Improvement</h4>
                        <p>Science topics need more practical examples. Consider adding more experiments and real-world applications.</p>
                    </div>
                    <div class="insight-card">
                        <h4><i class="fas fa-users" style="color: #2196F3;"></i> Group Performance</h4>
                        <p>Students from Village A are consistently outperforming others. Consider sharing their study techniques.</p>
                    </div>
                </div>
            </div>

            <!-- Detailed Analytics -->
            <div class="analytics-grid">
                <div class="analytics-card">
                    <h3><i class="fas fa-graduation-cap"></i> Top Performers</h3>
                    <div class="student-list" id="top-performers">
                        <!-- Top performers will be listed here -->
                    </div>
                </div>
                
                <div class="analytics-card">
                    <h3><i class="fas fa-user-clock"></i> Most Improved</h3>
                    <div class="student-list" id="most-improved">
                        <!-- Most improved students will be listed here -->
                    </div>
                </div>
                
                <div class="analytics-card">
                    <h3><i class="fas fa-chart-area"></i> Learning Patterns</h3>
                    <div class="chart-container">
                        <canvas id="learning-patterns-chart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="analytics-card">
                <h3><i class="fas fa-bullseye"></i> Recommendations</h3>
                <div id="recommendations-list">
                    <div class="recommendation-item">
                        <i class="fas fa-video" style="color: #2196F3;"></i>
                        <div>
                            <h4>Add Video Content</h4>
                            <p>Create explanatory videos for complex Science topics to improve understanding.</p>
                        </div>
                    </div>
                    <div class="recommendation-item">
                        <i class="fas fa-user-friends" style="color: #4CAF50;"></i>
                        <div>
                            <h4>Peer Learning Groups</h4>
                            <p>Form study groups for students struggling with Mathematics.</p>
                        </div>
                    </div>
                    <div class="recommendation-item">
                        <i class="fas fa-clock" style="color: #FF9800;"></i>
                        <div>
                            <h4>Flexible Study Hours</h4>
                            <p>Allow weekend study sessions for students with attendance challenges.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    <script src="analytics.js"></script>
</body>
</html>